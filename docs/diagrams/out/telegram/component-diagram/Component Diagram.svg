<?plantuml 1.2026.0?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="DESCRIPTION" height="858px" preserveAspectRatio="none" style="width:2303px;height:858px;background:#FFFFFF;" version="1.1" viewBox="0 0 2303 858" width="2303px" zoomAndPan="magnify"><title>Telegram Architecture Component Diagram</title><defs/><g><g class="title" data-source-line="3"><text fill="#000000" font-family="Verdana" font-size="22" font-weight="bold" lengthAdjust="spacing" textLength="541.1055" x="876.4473" y="35.4209">Telegram Architecture Component Diagram</text></g><!--cluster Telegram Ecosystem--><g class="cluster" data-qualified-name="Telegram Ecosystem" data-source-line="5" id="ent0002"><path d="M13.5,57.6094 L177.7217,57.6094 A3.75,3.75 0 0 1 180.2217,60.1094 L187.2217,79.9063 L1506.5,79.9063 A2.5,2.5 0 0 1 1509,82.4063 L1509,849.2994 A2.5,2.5 0 0 1 1506.5,851.7994 L13.5,851.7994 A2.5,2.5 0 0 1 11,849.2994 L11,60.1094 A2.5,2.5 0 0 1 13.5,57.6094" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="11" x2="187.2217" y1="79.9063" y2="79.9063"/><text fill="#000000" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="163.2217" x="15" y="72.6045">Telegram Ecosystem</text></g><!--cluster Connection Layer--><g class="cluster" data-qualified-name="Telegram Ecosystem.Connection Layer" data-source-line="10" id="ent0006"><path d="M796.5,281.9094 L934.9639,281.9094 A3.75,3.75 0 0 1 937.4639,284.4094 L944.4639,304.2063 L1240.5,304.2063 A2.5,2.5 0 0 1 1243,306.7063 L1243,376.7094 A2.5,2.5 0 0 1 1240.5,379.2094 L796.5,379.2094 A2.5,2.5 0 0 1 794,376.7094 L794,284.4094 A2.5,2.5 0 0 1 796.5,281.9094" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="794" x2="944.4639" y1="304.2063" y2="304.2063"/><text fill="#000000" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="137.4639" x="798" y="296.9045">Connection Layer</text></g><!--cluster Core Services--><g class="cluster" data-qualified-name="Telegram Ecosystem.Core Services" data-source-line="15" id="ent0009"><path d="M37.5,506.2094 L146.2002,506.2094 A3.75,3.75 0 0 1 148.7002,508.7094 L155.7002,528.5063 L1482.5,528.5063 A2.5,2.5 0 0 1 1485,531.0063 L1485,600.9994 A2.5,2.5 0 0 1 1482.5,603.4994 L37.5,603.4994 A2.5,2.5 0 0 1 35,600.9994 L35,508.7094 A2.5,2.5 0 0 1 37.5,506.2094" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="35" x2="155.7002" y1="528.5063" y2="528.5063"/><text fill="#000000" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="107.7002" x="39" y="521.2045">Core Services</text></g><!--cluster Data Layer--><g class="cluster" data-qualified-name="Telegram Ecosystem.Data Layer" data-source-line="24" id="ent0016"><path d="M365.5,730.4994 L452.4756,730.4994 A3.75,3.75 0 0 1 454.9756,732.9994 L461.9756,752.7963 L1047.5,752.7963 A2.5,2.5 0 0 1 1050,755.2963 L1050,825.2994 A2.5,2.5 0 0 1 1047.5,827.7994 L365.5,827.7994 A2.5,2.5 0 0 1 363,825.2994 L363,732.9994 A2.5,2.5 0 0 1 365.5,730.4994" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="363" x2="461.9756" y1="752.7963" y2="752.7963"/><text fill="#000000" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="85.9756" x="367" y="745.4945">Data Layer</text></g><!--cluster External Ecosystem--><g class="cluster" data-qualified-name="External Ecosystem" data-source-line="53" id="ent0034"><path d="M1535.5,730.4994 L1691.3203,730.4994 A3.75,3.75 0 0 1 1693.8203,732.9994 L1700.8203,752.7963 L2293.5,752.7963 A2.5,2.5 0 0 1 2296,755.2963 L2296,825.2994 A2.5,2.5 0 0 1 2293.5,827.7994 L1535.5,827.7994 A2.5,2.5 0 0 1 1533,825.2994 L1533,732.9994 A2.5,2.5 0 0 1 1535.5,730.4994" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="1533" x2="1700.8203" y1="752.7963" y2="752.7963"/><text fill="#000000" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="154.8203" x="1537" y="745.4945">External Ecosystem</text></g><!--entity mobile_app--><g class="entity" data-qualified-name="Telegram Ecosystem.mobile_app" data-source-line="6" id="ent0003"><rect fill="#FFFFFF" height="46.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="216.0459" x="614.98" y="92.6094"/><rect fill="#FFFFFF" height="10" style="stroke:#000000;stroke-width:1;" width="15" x="811.0259" y="97.6094"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1;" width="4" x="809.0259" y="99.6094"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1;" width="4" x="809.0259" y="103.6094"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="176.0459" x="629.98" y="125.6045">Mobile App (iOS/Android)</text></g><!--entity desktop_app--><g class="entity" data-qualified-name="Telegram Ecosystem.desktop_app" data-source-line="7" id="ent0004"><rect fill="#FFFFFF" height="46.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="129.5371" x="866.23" y="92.6094"/><rect fill="#FFFFFF" height="10" style="stroke:#000000;stroke-width:1;" width="15" x="975.7671" y="97.6094"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1;" width="4" x="973.7671" y="99.6094"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1;" width="4" x="973.7671" y="103.6094"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="89.5371" x="881.23" y="125.6045">Desktop App</text></g><!--entity web_app--><g class="entity" data-qualified-name="Telegram Ecosystem.web_app" data-source-line="8" id="ent0005"><rect fill="#FFFFFF" height="46.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="155.1855" x="1030.41" y="92.6094"/><rect fill="#FFFFFF" height="10" style="stroke:#000000;stroke-width:1;" width="15" x="1165.5955" y="97.6094"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1;" width="4" x="1163.5955" y="99.6094"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1;" width="4" x="1163.5955" y="103.6094"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="115.1855" x="1045.41" y="125.6045">Web Client (K/Z)</text></g><!--entity broker--><g class="entity" data-qualified-name="Telegram Ecosystem.broker" data-source-line="30" id="ent0020"><path d="M145,775.4994 L338.9961,775.4994 C343.9961,775.4994 343.9961,788.6478 343.9961,788.6478 C343.9961,788.6478 343.9961,801.7963 338.9961,801.7963 L145,801.7963 C140,801.7963 140,788.6478 140,788.6478 C140,788.6478 140,775.4994 145,775.4994" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M338.9961,775.4994 C333.9961,775.4994 333.9961,788.6478 333.9961,788.6478 C333.9961,801.7963 338.9961,801.7963 338.9961,801.7963" fill="none" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="183.9961" x="145" y="793.4945">Event Bus (Kafka/Internal)</text></g><!--entity mtproto_api--><g class="entity" data-qualified-name="Telegram Ecosystem.mtproto_api" data-source-line="33" id="ent0021"><ellipse cx="931" cy="227.9094" fill="#FFFFFF" rx="8" ry="8" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="118.8701" x="871.5649" y="257.9045">MTProto Protocol</text></g><!--entity bot_https_api--><g class="entity" data-qualified-name="Telegram Ecosystem.bot_https_api" data-source-line="34" id="ent0022"><ellipse cx="1288" cy="452.2094" fill="#FFFFFF" rx="8" ry="8" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="131.3252" x="1222.3374" y="482.2045">HTTPS / Webhooks</text></g><!--entity internal_rpc--><g class="entity" data-qualified-name="Telegram Ecosystem.internal_rpc" data-source-line="36" id="ent0023"><ellipse cx="931" cy="452.2094" fill="#FFFFFF" rx="8" ry="8" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="179.6621" x="841.1689" y="482.2045">Internal RPC (TL-Schema)</text></g><!--entity dfs_api--><g class="entity" data-qualified-name="Telegram Ecosystem.dfs_api" data-source-line="37" id="ent0024"><ellipse cx="944" cy="676.4994" fill="#FFFFFF" rx="8" ry="8" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="48.7607" x="919.6196" y="706.4945">File I/O</text></g><!--entity db_api--><g class="entity" data-qualified-name="Telegram Ecosystem.db_api" data-source-line="38" id="ent0025"><ellipse cx="654" cy="676.4994" fill="#FFFFFF" rx="8" ry="8" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="102.9492" x="602.5254" y="706.4945">DB Read/Write</text></g><!--entity cache_api--><g class="entity" data-qualified-name="Telegram Ecosystem.cache_api" data-source-line="39" id="ent0026"><ellipse cx="447" cy="676.4994" fill="#FFFFFF" rx="8" ry="8" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="96.1611" x="398.9194" y="706.4945">Cache Access</text></g><!--entity broker_api--><g class="entity" data-qualified-name="Telegram Ecosystem.broker_api" data-source-line="40" id="ent0027"><ellipse cx="280" cy="676.4994" fill="#FFFFFF" rx="8" ry="8" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="57.5654" x="251.2173" y="706.4945">Pub/Sub</text></g><!--entity sms_api--><g class="entity" data-qualified-name="Telegram Ecosystem.sms_api" data-source-line="42" id="ent0028"><ellipse cx="1104" cy="676.4994" fill="#FFFFFF" rx="8" ry="8" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="103.4414" x="1052.2793" y="706.4945">SMS Gateways</text></g><!--entity push_api--><g class="entity" data-qualified-name="Telegram Ecosystem.push_api" data-source-line="43" id="ent0029"><ellipse cx="1376" cy="676.4994" fill="#FFFFFF" rx="8" ry="8" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="144.8604" x="1303.5698" y="706.4945">Push Notification API</text></g><!--entity connection_manager--><g class="entity" data-qualified-name="Telegram Ecosystem.Connection Layer.connection_manager" data-source-line="11" id="ent0007"><rect fill="#FFFFFF" height="46.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="241.373" x="810.31" y="316.9094"/><rect fill="#FFFFFF" height="10" style="stroke:#000000;stroke-width:1;" width="15" x="1031.683" y="321.9094"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1;" width="4" x="1029.683" y="323.9094"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1;" width="4" x="1029.683" y="327.9094"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="201.373" x="825.31" y="349.9045">MTProto Gateway (DC Entry)</text></g><!--entity bot_api_server--><g class="entity" data-qualified-name="Telegram Ecosystem.Connection Layer.bot_api_server" data-source-line="12" id="ent0008"><rect fill="#FFFFFF" height="46.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="140.6182" x="1086.69" y="316.9094"/><rect fill="#FFFFFF" height="10" style="stroke:#000000;stroke-width:1;" width="15" x="1207.3082" y="321.9094"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1;" width="4" x="1205.3082" y="323.9094"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1;" width="4" x="1205.3082" y="327.9094"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="100.6182" x="1101.69" y="349.9045">Bot API Server</text></g><!--entity auth_service--><g class="entity" data-qualified-name="Telegram Ecosystem.Core Services.auth_service" data-source-line="16" id="ent0010"><rect fill="#FFFFFF" height="46.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="202.2373" x="573.88" y="541.2094"/><rect fill="#FFFFFF" height="10" style="stroke:#000000;stroke-width:1;" width="15" x="756.1173" y="546.2094"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1;" width="4" x="754.1173" y="548.2094"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1;" width="4" x="754.1173" y="552.2094"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="162.2373" x="588.88" y="574.2045">Auth &amp; Session Service</text></g><!--entity msg_service--><g class="entity" data-qualified-name="Telegram Ecosystem.Core Services.msg_service" data-source-line="17" id="ent0011"><rect fill="#FFFFFF" height="46.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="224.4063" x="314.8" y="541.2094"/><rect fill="#FFFFFF" height="10" style="stroke:#000000;stroke-width:1;" width="15" x="519.2063" y="546.2094"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1;" width="4" x="517.2063" y="548.2094"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1;" width="4" x="517.2063" y="552.2094"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="184.4063" x="329.8" y="574.2045">Message Handling Service</text></g><!--entity channel_service--><g class="entity" data-qualified-name="Telegram Ecosystem.Core Services.channel_service" data-source-line="18" id="ent0012"><rect fill="#FFFFFF" height="46.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="228.8359" x="50.58" y="541.2094"/><rect fill="#FFFFFF" height="10" style="stroke:#000000;stroke-width:1;" width="15" x="259.4159" y="546.2094"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1;" width="4" x="257.4159" y="548.2094"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1;" width="4" x="257.4159" y="552.2094"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="188.8359" x="65.58" y="574.2045">Channel/Broadcast Service</text></g><!--entity media_service--><g class="entity" data-qualified-name="Telegram Ecosystem.Core Services.media_service" data-source-line="19" id="ent0013"><rect fill="#FFFFFF" height="46.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="182.502" x="1085.75" y="541.2094"/><rect fill="#FFFFFF" height="10" style="stroke:#000000;stroke-width:1;" width="15" x="1248.252" y="546.2094"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1;" width="4" x="1246.252" y="548.2094"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1;" width="4" x="1246.252" y="552.2094"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="142.502" x="1100.75" y="574.2045">Media &amp; File Service</text></g><!--entity push_service--><g class="entity" data-qualified-name="Telegram Ecosystem.Core Services.push_service" data-source-line="20" id="ent0014"><rect fill="#FFFFFF" height="46.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="239.2334" x="811.38" y="541.2094"/><rect fill="#FFFFFF" height="10" style="stroke:#000000;stroke-width:1;" width="15" x="1030.6134" y="546.2094"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1;" width="4" x="1028.6134" y="548.2094"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1;" width="4" x="1028.6134" y="552.2094"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="199.2334" x="826.38" y="574.2045">Notification/Updates Service</text></g><!--entity e2e_service--><g class="entity" data-qualified-name="Telegram Ecosystem.Core Services.e2e_service" data-source-line="21" id="ent0015"><rect fill="#FFFFFF" height="46.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="165.7676" x="1303.12" y="541.2094"/><rect fill="#FFFFFF" height="10" style="stroke:#000000;stroke-width:1;" width="15" x="1448.8876" y="546.2094"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1;" width="4" x="1446.8876" y="548.2094"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1;" width="4" x="1446.8876" y="552.2094"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="125.7676" x="1318.12" y="574.2045">Secret Chat Relay</text></g><!--entity sharded_db--><g class="entity" data-qualified-name="Telegram Ecosystem.Data Layer.sharded_db" data-source-line="25" id="ent0017"><rect fill="#FFFFFF" height="46.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="160.4834" x="592.76" y="765.4994"/><rect fill="#FFFFFF" height="10" style="stroke:#000000;stroke-width:1;" width="15" x="733.2434" y="770.4994"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1;" width="4" x="731.2434" y="772.4994"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1;" width="4" x="731.2434" y="776.4994"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="120.4834" x="607.76" y="798.4945">Sharded Chat DB</text></g><!--entity media_storage--><g class="entity" data-qualified-name="Telegram Ecosystem.Data Layer.media_storage" data-source-line="26" id="ent0018"><rect fill="#FFFFFF" height="46.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="246.4932" x="787.75" y="765.4994"/><rect fill="#FFFFFF" height="10" style="stroke:#000000;stroke-width:1;" width="15" x="1014.2432" y="770.4994"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1;" width="4" x="1012.2432" y="772.4994"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1;" width="4" x="1012.2432" y="776.4994"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="206.4932" x="802.75" y="798.4945">Distributed File System (DFS)</text></g><!--entity cache--><g class="entity" data-qualified-name="Telegram Ecosystem.Data Layer.cache" data-source-line="27" id="ent0019"><rect fill="#FFFFFF" height="46.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="178.8311" x="378.58" y="765.4994"/><rect fill="#FFFFFF" height="10" style="stroke:#000000;stroke-width:1;" width="15" x="537.4111" y="770.4994"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1;" width="4" x="535.4111" y="772.4994"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1;" width="4" x="535.4111" y="776.4994"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="138.8311" x="393.58" y="798.4945">State Cache (Redis)</text></g><!--entity sms_provider--><g class="entity" data-qualified-name="External Ecosystem.sms_provider" data-source-line="54" id="ent0035"><rect fill="#FFFFFF" height="46.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="247.1631" x="1549.42" y="765.4994"/><rect fill="#FFFFFF" height="10" style="stroke:#000000;stroke-width:1;" width="15" x="1776.5831" y="770.4994"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1;" width="4" x="1774.5831" y="772.4994"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1;" width="4" x="1774.5831" y="776.4994"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="207.1631" x="1564.42" y="798.4945">SMS Providers (Twilio/Others)</text></g><!--entity push_provider--><g class="entity" data-qualified-name="External Ecosystem.push_provider" data-source-line="55" id="ent0036"><rect fill="#FFFFFF" height="46.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="222.752" x="1831.62" y="765.4994"/><rect fill="#FFFFFF" height="10" style="stroke:#000000;stroke-width:1;" width="15" x="2034.372" y="770.4994"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1;" width="4" x="2032.372" y="772.4994"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1;" width="4" x="2032.372" y="776.4994"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="182.752" x="1846.62" y="798.4945">Push Services (FCM/APNs)</text></g><!--entity external_bots--><g class="entity" data-qualified-name="External Ecosystem.external_bots" data-source-line="56" id="ent0037"><rect fill="#FFFFFF" height="46.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="190.3154" x="2089.84" y="765.4994"/><rect fill="#FFFFFF" height="10" style="stroke:#000000;stroke-width:1;" width="15" x="2260.1554" y="770.4994"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1;" width="4" x="2258.1554" y="772.4994"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1;" width="4" x="2258.1554" y="776.4994"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="150.3154" x="2104.84" y="798.4945">3rd Party Bot Servers</text></g><!--link mobile_app to mtproto_api--><g class="link" data-entity-1="ent0003" data-entity-2="ent0021" data-source-line="46" id="lnk30"><path d="M765.59,139.3194 C815.75,165.8794 886.7521,203.4805 913.2721,217.5205" fill="none" id="mobile_app-to-mtproto_api" style="stroke:#000000;stroke-width:1;"/><path d="M923.3466,213.2847 A9,9 0 0 0 915.4325 228.2335" fill="none" style="stroke:#000000;stroke-width:1.5;"/></g><!--link desktop_app to mtproto_api--><g class="link" data-entity-1="ent0004" data-entity-2="ent0021" data-source-line="47" id="lnk31"><path d="M931,139.3194 C931,164.1194 931,192.6194 931,209.0494" fill="none" id="desktop_app-to-mtproto_api" style="stroke:#000000;stroke-width:1;"/><path d="M939.4572,215.9712 A9,9 0 0 0 922.5428 215.9712" fill="none" style="stroke:#000000;stroke-width:1.5;"/></g><!--link web_app to mtproto_api--><g class="link" data-entity-1="ent0005" data-entity-2="ent0021" data-source-line="48" id="lnk32"><path d="M1071.75,139.3194 C1029.88,165.3694 972.1914,201.2777 948.3814,216.0877" fill="none" id="web_app-to-mtproto_api" style="stroke:#000000;stroke-width:1;"/><path d="M946.9707,226.9249 A9,9 0 0 0 938.0369 212.5622" fill="none" style="stroke:#000000;stroke-width:1.5;"/></g><!--link mtproto_api to connection_manager--><g class="link" data-entity-1="ent0021" data-entity-2="ent0007" data-link-type="association" data-source-line="50" id="lnk33"><path d="M931,236.8294 C931,253.3094 931,291.7894 931,316.5594" fill="none" id="mtproto_api-connection_manager" style="stroke:#000000;stroke-width:1;"/></g><!--link connection_manager to internal_rpc--><g class="link" data-entity-1="ent0007" data-entity-2="ent0023" data-source-line="60" id="lnk38"><path d="M931,363.6094 C931,388.4094 931,416.9094 931,433.3394" fill="none" id="connection_manager-to-internal_rpc" style="stroke:#000000;stroke-width:1;"/><path d="M939.4572,440.2612 A9,9 0 0 0 922.5428 440.2612" fill="none" style="stroke:#000000;stroke-width:1.5;"/></g><!--link bot_api_server to internal_rpc--><g class="link" data-entity-1="ent0008" data-entity-2="ent0023" data-source-line="61" id="lnk39"><path d="M1115.14,363.5394 C1100.61,371.1994 1084.16,379.7194 1069,387.2094 C1020.69,411.0594 970.8759,433.473 948.9259,443.243" fill="none" id="bot_api_server-to-internal_rpc" style="stroke:#000000;stroke-width:1;"/><path d="M946.0412,453.7841 A9,9 0 0 0 939.1631 438.3312" fill="none" style="stroke:#000000;stroke-width:1.5;"/></g><!--link internal_rpc to auth_service--><g class="link" data-entity-1="ent0023" data-entity-2="ent0010" data-link-type="association" data-source-line="63" id="lnk40"><path d="M922.14,455.5094 C900.03,461.3794 840.86,477.8894 794,498.2094 C765.58,510.5294 734.96,527.3794 711.9,540.8594" fill="none" id="internal_rpc-auth_service" style="stroke:#000000;stroke-width:1;"/></g><!--link internal_rpc to msg_service--><g class="link" data-entity-1="ent0023" data-entity-2="ent0011" data-link-type="association" data-source-line="64" id="lnk41"><path d="M922.05,453.1494 C879.88,453.1094 697.22,455.5194 556,498.2094 C522.98,508.1894 488.21,526.2394 463.11,540.8194" fill="none" id="internal_rpc-msg_service" style="stroke:#000000;stroke-width:1;"/></g><!--link internal_rpc to channel_service--><g class="link" data-entity-1="ent0023" data-entity-2="ent0012" data-link-type="association" data-source-line="65" id="lnk42"><path d="M922.3,453.3594 C855.44,454.6394 422.67,464.1494 297,498.2094 C262.71,507.4994 226.75,525.9094 201.03,540.7894" fill="none" id="internal_rpc-channel_service" style="stroke:#000000;stroke-width:1;"/></g><!--link internal_rpc to media_service--><g class="link" data-entity-1="ent0023" data-entity-2="ent0013" data-link-type="association" data-source-line="66" id="lnk43"><path d="M939.91,455.3994 C962.13,461.0194 1021.54,477.0094 1068,498.2094 C1094.48,510.2894 1122.63,527.2294 1143.69,540.8094" fill="none" id="internal_rpc-media_service" style="stroke:#000000;stroke-width:1;"/></g><!--link internal_rpc to push_service--><g class="link" data-entity-1="ent0023" data-entity-2="ent0014" data-link-type="association" data-source-line="67" id="lnk44"><path d="M931,461.1294 C931,477.5994 931,516.0894 931,540.8494" fill="none" id="internal_rpc-push_service" style="stroke:#000000;stroke-width:1;"/></g><!--link internal_rpc to e2e_service--><g class="link" data-entity-1="ent0023" data-entity-2="ent0015" data-link-type="association" data-source-line="68" id="lnk45"><path d="M939.86,454.0894 C991.51,459.2694 1252.39,485.8694 1286,498.2094 C1312.84,508.0594 1339.81,526.2194 1358.96,540.8694" fill="none" id="internal_rpc-e2e_service" style="stroke:#000000;stroke-width:1;"/></g><!--reverse link bot_https_api to external_bots--><g class="link" data-entity-1="ent0022" data-entity-2="ent0037" data-source-line="71" id="lnk47"><path d="M1306.6019,456.5205 C1334.4419,461.5305 1413.5,476.4994 1485,498.2094 C1752.24,579.3494 1819.79,602.5394 2072,722.4994 C2098.58,735.1494 2127.31,751.7494 2149.14,765.0294" fill="none" id="bot_https_api-backto-external_bots" style="stroke:#000000;stroke-width:1;"/><path d="M1298.2916,463.6181 A9,9 0 0 0 1301.2874 446.971" fill="none" style="stroke:#000000;stroke-width:1.5;"/></g><!--link bot_api_server to bot_https_api--><g class="link" data-entity-1="ent0008" data-entity-2="ent0022" data-link-type="association" data-source-line="72" id="lnk49"><path d="M1183.83,363.6094 C1213.62,388.6594 1260.04,427.6994 1279.24,443.8394" fill="none" id="bot_api_server-bot_https_api" style="stroke:#000000;stroke-width:1;"/></g><!--link msg_service to db_api--><g class="link" data-entity-1="ent0011" data-entity-2="ent0025" data-source-line="75" id="lnk50"><path d="M473.48,587.9094 C528.74,614.7194 608.0126,653.1951 636.1126,666.8251" fill="none" id="msg_service-to-db_api" style="stroke:#000000;stroke-width:1;"/><path d="M646.0314,662.2367 A9,9 0 0 0 638.6495 677.4553" fill="none" style="stroke:#000000;stroke-width:1.5;"/></g><!--link channel_service to db_api--><g class="link" data-entity-1="ent0012" data-entity-2="ent0025" data-source-line="76" id="lnk51"><path d="M222.48,587.9394 C245.39,596.2794 272.17,605.2194 297,611.4994 C394.75,636.2394 421.86,629.1094 521,647.4994 C568.1,656.2394 614.3763,666.5235 635.5563,671.3135" fill="none" id="channel_service-to-db_api" style="stroke:#000000;stroke-width:1;"/><path d="M644.1732,664.5915 A9,9 0 0 0 640.4421 681.0893" fill="none" style="stroke:#000000;stroke-width:1.5;"/></g><!--link auth_service to db_api--><g class="link" data-entity-1="ent0010" data-entity-2="ent0025" data-source-line="77" id="lnk52"><path d="M670.7,587.9094 C665.97,612.7094 660.5014,641.386 657.3714,657.816" fill="none" id="auth_service-to-db_api" style="stroke:#000000;stroke-width:1;"/><path d="M664.3839,666.1983 A9,9 0 0 0 647.7682 663.0329" fill="none" style="stroke:#000000;stroke-width:1.5;"/></g><!--link db_api to sharded_db--><g class="link" data-entity-1="ent0025" data-entity-2="ent0017" data-link-type="association" data-source-line="79" id="lnk54"><path d="M655.37,685.4194 C658.21,701.8994 664.85,740.3794 669.12,765.1494" fill="none" id="db_api-sharded_db" style="stroke:#000000;stroke-width:1;"/></g><!--link media_service to dfs_api--><g class="link" data-entity-1="ent0013" data-entity-2="ent0024" data-source-line="81" id="lnk55"><path d="M1129.29,587.9094 C1072.3,614.8494 990.1508,653.6858 961.7608,667.1058" fill="none" id="media_service-to-dfs_api" style="stroke:#000000;stroke-width:1;"/><path d="M959.1172,677.7099 A9,9 0 0 0 951.8886 662.4179" fill="none" style="stroke:#000000;stroke-width:1.5;"/></g><!--link dfs_api to media_storage--><g class="link" data-entity-1="ent0024" data-entity-2="ent0018" data-link-type="association" data-source-line="82" id="lnk57"><path d="M941.63,685.4194 C936.69,701.8994 925.16,740.3794 917.74,765.1494" fill="none" id="dfs_api-media_storage" style="stroke:#000000;stroke-width:1;"/></g><!--link msg_service to cache_api--><g class="link" data-entity-1="ent0011" data-entity-2="ent0026" data-source-line="84" id="lnk58"><path d="M431.1,587.9094 C435.6,612.7094 440.8054,641.3699 443.7854,657.7999" fill="none" id="msg_service-to-cache_api" style="stroke:#000000;stroke-width:1;"/><path d="M453.3421,663.1013 A9,9 0 0 0 436.6992 666.1199" fill="none" style="stroke:#000000;stroke-width:1.5;"/></g><!--link channel_service to cache_api--><g class="link" data-entity-1="ent0012" data-entity-2="ent0026" data-source-line="85" id="lnk59"><path d="M222.75,587.9094 C293,615.3494 396.9047,655.9427 428.9747,668.4627" fill="none" id="channel_service-to-cache_api" style="stroke:#000000;stroke-width:1;"/><path d="M438.4982,663.1018 A9,9 0 0 0 432.347 678.8581" fill="none" style="stroke:#000000;stroke-width:1.5;"/></g><!--link auth_service to cache_api--><g class="link" data-entity-1="ent0010" data-entity-2="ent0026" data-source-line="86" id="lnk60"><path d="M628.31,587.9094 C572.81,614.7194 493.1547,653.2102 464.9347,666.8402" fill="none" id="auth_service-to-cache_api" style="stroke:#000000;stroke-width:1;"/><path d="M462.38,677.4661 A9,9 0 0 0 455.0236 662.2351" fill="none" style="stroke:#000000;stroke-width:1.5;"/></g><!--link cache_api to cache--><g class="link" data-entity-1="ent0026" data-entity-2="ent0019" data-link-type="association" data-source-line="87" id="lnk62"><path d="M448.51,685.4194 C451.65,701.8994 458.99,740.3794 463.71,765.1494" fill="none" id="cache_api-cache" style="stroke:#000000;stroke-width:1;"/></g><!--link msg_service to broker_api--><g class="link" data-entity-1="ent0011" data-entity-2="ent0027" data-source-line="90" id="lnk63"><path d="M396.9,587.9094 C362.96,613.3394 317.8018,647.1718 296.8818,662.8518" fill="none" id="msg_service-to-broker_api" style="stroke:#000000;stroke-width:1;"/><path d="M296.4154,673.7706 A9,9 0 0 0 286.2708 660.2359" fill="none" style="stroke:#000000;stroke-width:1.5;"/></g><!--link channel_service to broker_api--><g class="link" data-entity-1="ent0012" data-entity-2="ent0027" data-source-line="91" id="lnk64"><path d="M188.55,587.9094 C214.44,612.7094 247.419,644.2915 264.569,660.7215" fill="none" id="channel_service-to-broker_api" style="stroke:#000000;stroke-width:1;"/><path d="M275.4178,659.4029 A9,9 0 0 0 263.7166 671.6169" fill="none" style="stroke:#000000;stroke-width:1.5;"/></g><!--reverse link broker_api to push_service--><g class="link" data-entity-1="ent0027" data-entity-2="ent0014" data-source-line="92" id="lnk66"><path d="M298.3181,668.7624 C314.8481,662.7524 342.05,653.5694 374,647.4994 C558.07,612.5794 610.58,649.6794 794,611.4994 C820.91,605.8994 849.86,596.6494 874.19,587.8894" fill="none" id="broker_api-backto-push_service" style="stroke:#000000;stroke-width:1;"/><path d="M294.7027,679.0758 A9,9 0 0 0 288.9231 663.1794" fill="none" style="stroke:#000000;stroke-width:1.5;"/></g><!--link broker_api to broker--><g class="link" data-entity-1="ent0027" data-entity-2="ent0020" data-link-type="association" data-source-line="93" id="lnk68"><path d="M277.27,685.4194 C270.73,704.3694 254.16,752.3994 246.29,775.2294" fill="none" id="broker_api-broker" style="stroke:#000000;stroke-width:1;"/></g><!--link auth_service to sms_api--><g class="link" data-entity-1="ent0010" data-entity-2="ent0028" data-source-line="96" id="lnk69"><path d="M726.69,587.8894 C747.33,596.2294 771.49,605.1794 794,611.4994 C880.95,635.9394 905.74,628.3494 994,647.4994 C1031.94,655.7394 1066.9947,665.2035 1085.5747,670.3635" fill="none" id="auth_service-to-sms_api" style="stroke:#000000;stroke-width:1;"/><path d="M1094.5071,664.0669 A9,9 0 0 0 1089.981 680.3645" fill="none" style="stroke:#000000;stroke-width:1.5;"/></g><!--link sms_api to sms_provider--><g class="link" data-entity-1="ent0028" data-entity-2="ent0035" data-link-type="association" data-source-line="97" id="lnk70"><path d="M1112.94,679.2294 C1162.53,688.8294 1407.01,736.1594 1556.09,765.0194" fill="none" id="sms_api-sms_provider" style="stroke:#000000;stroke-width:1;"/></g><!--link push_service to push_api--><g class="link" data-entity-1="ent0014" data-entity-2="ent0029" data-source-line="99" id="lnk71"><path d="M992.92,587.9694 C1016.26,596.0294 1043.17,604.7694 1068,611.4994 C1184.75,643.1694 1320.1829,666.3244 1357.2229,672.4244" fill="none" id="push_service-to-push_api" style="stroke:#000000;stroke-width:1;"/><path d="M1365.427,665.2043 A9,9 0 0 0 1362.6784 681.894" fill="none" style="stroke:#000000;stroke-width:1.5;"/></g><!--link push_api to push_provider--><g class="link" data-entity-1="ent0029" data-entity-2="ent0036" data-link-type="association" data-source-line="100" id="lnk72"><path d="M1384.74,679.4494 C1408.35,684.6094 1475.44,698.7494 1532,705.4994 C1656.67,720.3994 1692.79,689.7494 1814,722.4994 C1847.79,731.6294 1883.06,750.1594 1908.16,765.1294" fill="none" id="push_api-push_provider" style="stroke:#000000;stroke-width:1;"/></g><?plantuml-src TLRRRkCs57pNLvpweN4U0W7j5_YIT8DkDaRaOe4MXK5HJ4HO8bMIYciK--yzl4WY5GKm4eipF1mE3qV-oTIiPT0rX8iiCzmq38wiOM-AjB1HjEQ6KTCh1ZlPTb8mOM3FYOMph2FqJDuOhCOPzrJggpQiNS5_6S1VJxBaM77JTR3cpqM-4PMIlBhz6uY6re4dqdMMkcVwR6HdkGwj_FC0VsSbx1fkrr__dl_fArnO6N3yZ6fsKWWKpQM0h-JAbDTYrHmFIXe9ln73BkGAw_qExeLHLr-DZlDEBH5OIlbfMsbWStY4WgbtfXorb0ONvYVjXf3suuC6jCnEu9JfKS2cDpNyZEDQMtK1TnK9GguS3WIroBArlX1HDLoy9VHMlwNiNKrGVPDlbIGL9TeaTEhH-G8L9oZdmHvHKjm2AVURDFoLKsBToV_eAdHG9tEwNi_q5umgPW256NXX3Raw7lk5HRIvRNjYoEpGYfgeYbM-pdxhYcW_TgfApzbpRHGlUuCylnlNX7Z03yLjl2KZ5QuJ2XlS1Em8hHciNn3NeGtioAJjdvxrgEp-tRRUjjVOVkJrJF97OPWIfBbTkOPGykmQ0JytuB1NGgDRen5Oty9gw47tbyh6pMvDPnzjImNQb-FnK40EsFQrb6Uz6hgkDgRJWHYuWn9uEUnWVVnwL-06MkA5yG2UL4S3tpdqc3yxl7hLqRBxBHuLgVBl2k-znyi8zcPjAFQqL-IyYWY7lioBlemiSM10YwTYk7j-kcvrCbdN43UQlNMhiRd6FTyCGO0spkywmbEim5qbB-9kFVCtIfPF625NFa7j6jD082sbnuye8k__3OSqZqXh2ZR3Ew-OmkOwNdZ3PVwCkQn2GrgNki2mCvnFGxR0-c7tb6yEtmBPMHMpVrKL78WoLx0vvZDC-wiO99smhxGLU_F1JcinzZmNUE3Zajd7hOvE9UsMfkGo9ukV1Y-JC5mYnF6tXC_pRh56ad9BZ2JJbWXncA5xmuj2TupQ9eOBLnZSMM8qtFKTcf3UvUJ9CUQl62m_7ZaUoXIKMUJ5Q76ujJCRvd1iynpBfeprUeRnnBPfLeYH96V3n00j2fq2v3Ej4sDHRbJ0XPDRSXf4spRwAcYjf90Otk7LjQWb2gpFn4IKk3c6CvrG_pMSP1I4Dp06WOrj_D5ahv5UtjiGZ-7_q7L97inqX9bZO0vVafOU9lyF?></g></svg>