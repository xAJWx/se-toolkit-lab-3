<?plantuml 1.2026.0?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="1642px" preserveAspectRatio="none" style="width:2525px;height:1642px;background:#FFFFFF;" version="1.1" viewBox="0 0 2525 1642" width="2525px" zoomAndPan="magnify"><title>Wildberries Order Flow (Checkout to Fulfillment)</title><defs/><g><text fill="#000000" font-family="Verdana" font-size="22" font-weight="bold" lengthAdjust="spacing" textLength="606.2783" x="963.4146" y="35.4209">Wildberries Order Flow (Checkout to Fulfillment)</text><rect fill="#FFFFFF" height="1584.1016" style="stroke:#000000;stroke-width:1;" width="274.1357" x="21" y="52.6094"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="79.2061" x="118.4648" y="64.6763">Client Side</text><rect fill="#F5F5F5" height="1584.1016" style="stroke:#000000;stroke-width:1;" width="179.2178" x="458.8872" y="52.6094"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="109.0146" x="493.9888" y="64.6763">Gateway Layer</text><rect fill="#E6F3FF" height="1584.1016" style="stroke:#000000;stroke-width:1;" width="671.4878" x="701.5156" y="52.6094"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="169.438" x="952.5405" y="64.6763">Core Business Services</text><rect fill="#FFFFE0" height="1584.1016" style="stroke:#000000;stroke-width:1;" width="373.7148" x="1473.6143" y="52.6094"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="140.2261" x="1590.3586" y="64.6763">Data &amp; Middleware</text><rect fill="#FFE4E1" height="1584.1016" style="stroke:#000000;stroke-width:1;" width="473.4917" x="2039.6157" y="52.6094"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="146.4087" x="2203.1572" y="64.6763">Logistics &amp; External</text><g><title>Storefront Gateway</title><rect fill="#FFFFFF" height="145.6641" style="stroke:#000000;stroke-width:1;" width="10" x="543.4961" y="283.7031"/></g><g><title>Storefront Gateway</title><rect fill="#FFFFFF" height="349.5938" style="stroke:#000000;stroke-width:1;" width="10" x="543.4961" y="518.7656"/></g><g><title>Storefront Gateway</title><rect fill="#FFFFFF" height="225.0625" style="stroke:#000000;stroke-width:1;" width="10" x="543.4961" y="978.8906"/></g><g><title>Cart Service</title><rect fill="#FFFFFF" height="87.3984" style="stroke:#000000;stroke-width:1;" width="10" x="760.4111" y="312.8359"/></g><g><title>Order .OMS.</title><rect fill="#FFFFFF" height="291.3281" style="stroke:#000000;stroke-width:1;" width="10" x="891.002" y="547.8984"/></g><g><title>Order .OMS.</title><rect fill="#FFFFFF" height="137.6641" style="stroke:#000000;stroke-width:1;" width="10" x="891.002" y="1037.1563"/></g><g><title>Payment Service</title><rect fill="#FFFFFF" height="87.3984" style="stroke:#000000;stroke-width:1;" width="10" x="1120.8872" y="722.6953"/></g><g><title>Payment Service</title><rect fill="#FFFFFF" height="195.9297" style="stroke:#000000;stroke-width:1;" width="10" x="1120.8872" y="1008.0234"/></g><g><title>Inventory Service</title><rect fill="#FFFFFF" height="87.3984" style="stroke:#000000;stroke-width:1;" width="10" x="1285.4731" y="577.0313"/></g><g><title>WMS .Warehouse.</title><rect fill="#FFFFFF" height="150.6641" style="stroke:#000000;stroke-width:1;" width="10" x="2120.2119" y="1293.3516"/></g><rect fill="#F9F9F9" height="271.3281" style="stroke:#000000;stroke-width:1;" width="1739.0127" x="15" y="166.0391"/><rect fill="#F0FFF0" height="475.2578" style="stroke:#000000;stroke-width:1;" width="2504.1074" x="15" y="451.3672"/><rect fill="#FFF0F0" height="271.3281" style="stroke:#000000;stroke-width:1;" width="2066.2202" x="452.8872" y="940.625"/><rect fill="#FFFFE0" height="313.4609" style="stroke:#000000;stroke-width:1;" width="2296.6787" x="141.5137" y="1225.9531"/><g class="participant-lifeline" data-entity-uid="part1" data-qualified-name="Alice" id="part1-lifeline"><g><title>User Alice</title><rect fill="#000000" fill-opacity="0.00000" height="1407.375" width="8" x="59.0137" y="149.0391"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:5,5;" x1="63" x2="63" y1="149.0391" y2="1556.4141"/></g></g><g class="participant-lifeline" data-entity-uid="part2" data-qualified-name="App" id="part2-lifeline"><g><title>WB Mobile App</title><rect fill="#000000" fill-opacity="0.00000" height="1407.375" width="8" x="217.3247" y="149.0391"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:5,5;" x1="220.5137" x2="220.5137" y1="149.0391" y2="1556.4141"/></g></g><g class="participant-lifeline" data-entity-uid="part3" data-qualified-name="Gateway" id="part3-lifeline"><g><title>Storefront Gateway</title><rect fill="#000000" fill-opacity="0.00000" height="1407.375" width="8" x="544.4961" y="149.0391"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:5,5;" x1="547.8872" x2="547.8872" y1="149.0391" y2="1556.4141"/></g></g><g class="participant-lifeline" data-entity-uid="part4" data-qualified-name="CartSvc" id="part4-lifeline"><g><title>Cart Service</title><rect fill="#000000" fill-opacity="0.00000" height="1407.375" width="8" x="761.4111" y="149.0391"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:5,5;" x1="764.5156" x2="764.5156" y1="149.0391" y2="1556.4141"/></g></g><g class="participant-lifeline" data-entity-uid="part5" data-qualified-name="OMS" id="part5-lifeline"><g><title>Order .OMS.</title><rect fill="#000000" fill-opacity="0.00000" height="1407.375" width="8" x="892.002" y="149.0391"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:5,5;" x1="895.3066" x2="895.3066" y1="149.0391" y2="1556.4141"/></g></g><g class="participant-lifeline" data-entity-uid="part6" data-qualified-name="PaySvc" id="part6-lifeline"><g><title>Payment Service</title><rect fill="#000000" fill-opacity="0.00000" height="1407.375" width="8" x="1121.8872" y="149.0391"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:5,5;" x1="1125.8315" x2="1125.8315" y1="149.0391" y2="1556.4141"/></g></g><g class="participant-lifeline" data-entity-uid="part7" data-qualified-name="InvSvc" id="part7-lifeline"><g><title>Inventory Service</title><rect fill="#000000" fill-opacity="0.00000" height="1407.375" width="8" x="1286.4731" y="149.0391"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:5,5;" x1="1289.9429" x2="1289.9429" y1="149.0391" y2="1556.4141"/></g></g><g class="participant-lifeline" data-entity-uid="part8" data-qualified-name="Kafka" id="part8-lifeline"><g><title>Kafka Event Bus</title><rect fill="#000000" fill-opacity="0.00000" height="1407.375" width="8" x="1540.6909" y="149.0391"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:5,5;" x1="1544.6143" x2="1544.6143" y1="149.0391" y2="1556.4141"/></g></g><g class="participant-lifeline" data-entity-uid="part9" data-qualified-name="Cache" id="part9-lifeline"><g><title>Redis .Hot Data.</title><rect fill="#000000" fill-opacity="0.00000" height="1407.375" width="8" x="1678.8901" y="149.0391"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:5,5;" x1="1682.7676" x2="1682.7676" y1="149.0391" y2="1556.4141"/></g></g><g class="participant-lifeline" data-entity-uid="part10" data-qualified-name="DB" id="part10-lifeline"><g><title>Sharded DB</title><rect fill="#000000" fill-opacity="0.00000" height="1407.375" width="8" x="1794.6709" y="149.0391"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:5,5;" x1="1798.0127" x2="1798.0127" y1="149.0391" y2="1556.4141"/></g></g><g class="participant-lifeline" data-entity-uid="part11" data-qualified-name="WMS" id="part11-lifeline"><g><title>WMS .Warehouse.</title><rect fill="#000000" fill-opacity="0.00000" height="1407.375" width="8" x="2121.2119" y="149.0391"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:5,5;" x1="2124.6157" x2="2124.6157" y1="149.0391" y2="1556.4141"/></g></g><g class="participant-lifeline" data-entity-uid="part12" data-qualified-name="Bank" id="part12-lifeline"><g><title>Bank . Acquirer</title><rect fill="#000000" fill-opacity="0.00000" height="1407.375" width="8" x="2434.1924" y="149.0391"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:5,5;" x1="2437.2773" x2="2437.2773" y1="149.0391" y2="1556.4141"/></g></g><g class="participant participant-head" data-entity-uid="part1" data-qualified-name="Alice" id="part1-head"><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="70.0273" x="25" y="145.7373">User Alice</text><ellipse cx="63.0137" cy="80.7422" fill="#FFFFFF" rx="8" ry="8" style="stroke:#000000;stroke-width:1;"/><path d="M63.0137,88.7422 L63.0137,115.7422 M50.0137,96.7422 L76.0137,96.7422 M63.0137,115.7422 L50.0137,130.7422 M63.0137,115.7422 L76.0137,130.7422" fill="none" style="stroke:#000000;stroke-width:1;"/></g><g class="participant participant-tail" data-entity-uid="part1" data-qualified-name="Alice" id="part1-tail"><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="70.0273" x="25" y="1568.4092">User Alice</text><ellipse cx="63.0137" cy="1580.7109" fill="#FFFFFF" rx="8" ry="8" style="stroke:#000000;stroke-width:1;"/><path d="M63.0137,1588.7109 L63.0137,1615.7109 M50.0137,1596.7109 L76.0137,1596.7109 M63.0137,1615.7109 L50.0137,1630.7109 M63.0137,1615.7109 L76.0137,1630.7109" fill="none" style="stroke:#000000;stroke-width:1;"/></g><g class="participant participant-head" data-entity-uid="part2" data-qualified-name="App" id="part2-head"><rect fill="#FFFFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="119.6221" x="161.5137" y="117.7422"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="105.6221" x="168.5137" y="137.7373">WB Mobile App</text></g><g class="participant participant-tail" data-entity-uid="part2" data-qualified-name="App" id="part2-tail"><rect fill="#FFFFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="119.6221" x="161.5137" y="1555.4141"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="105.6221" x="168.5137" y="1575.4092">WB Mobile App</text></g><g class="participant participant-head" data-entity-uid="part3" data-qualified-name="Gateway" id="part3-head"><rect fill="#FFFFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="151.2178" x="472.8872" y="117.7422"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="137.2178" x="479.8872" y="137.7373">Storefront Gateway</text></g><g class="participant participant-tail" data-entity-uid="part3" data-qualified-name="Gateway" id="part3-tail"><rect fill="#FFFFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="151.2178" x="472.8872" y="1555.4141"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="137.2178" x="479.8872" y="1575.4092">Storefront Gateway</text></g><g class="participant participant-head" data-entity-uid="part4" data-qualified-name="CartSvc" id="part4-head"><rect fill="#FFFFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="99.791" x="715.5156" y="117.7422"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="85.791" x="722.5156" y="137.7373">Cart Service</text></g><g class="participant participant-tail" data-entity-uid="part4" data-qualified-name="CartSvc" id="part4-tail"><rect fill="#FFFFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="99.791" x="715.5156" y="1555.4141"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="85.791" x="722.5156" y="1575.4092">Cart Service</text></g><g class="participant participant-head" data-entity-uid="part5" data-qualified-name="OMS" id="part5-head"><rect fill="#FFFFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="101.3906" x="845.3066" y="117.7422"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="87.3906" x="852.3066" y="137.7373">Order (OMS)</text></g><g class="participant participant-tail" data-entity-uid="part5" data-qualified-name="OMS" id="part5-tail"><rect fill="#FFFFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="101.3906" x="845.3066" y="1555.4141"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="87.3906" x="852.3066" y="1575.4092">Order (OMS)</text></g><g class="participant participant-head" data-entity-uid="part6" data-qualified-name="PaySvc" id="part6-head"><rect fill="#FFFFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="132.1113" x="1059.8315" y="117.7422"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="118.1113" x="1066.8315" y="137.7373">Payment Service</text></g><g class="participant participant-tail" data-entity-uid="part6" data-qualified-name="PaySvc" id="part6-tail"><rect fill="#FFFFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="132.1113" x="1059.8315" y="1555.4141"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="118.1113" x="1066.8315" y="1575.4092">Payment Service</text></g><g class="participant participant-head" data-entity-uid="part7" data-qualified-name="InvSvc" id="part7-head"><rect fill="#FFFFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="137.0605" x="1221.9429" y="117.7422"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="123.0605" x="1228.9429" y="137.7373">Inventory Service</text></g><g class="participant participant-tail" data-entity-uid="part7" data-qualified-name="InvSvc" id="part7-tail"><rect fill="#FFFFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="137.0605" x="1221.9429" y="1555.4141"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="123.0605" x="1228.9429" y="1575.4092">Inventory Service</text></g><g class="participant participant-head" data-entity-uid="part8" data-qualified-name="Kafka" id="part8-head"><path d="M1482.6143,122.7422 L1606.7676,122.7422 C1611.7676,122.7422 1611.7676,135.8906 1611.7676,135.8906 C1611.7676,135.8906 1611.7676,149.0391 1606.7676,149.0391 L1482.6143,149.0391 C1477.6143,149.0391 1477.6143,135.8906 1477.6143,135.8906 C1477.6143,135.8906 1477.6143,122.7422 1482.6143,122.7422" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M1606.7676,122.7422 C1601.7676,122.7422 1601.7676,135.8906 1601.7676,135.8906 C1601.7676,149.0391 1606.7676,149.0391 1606.7676,149.0391" fill="none" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="114.1533" x="1482.6143" y="140.7373">Kafka Event Bus</text></g><g class="participant participant-tail" data-entity-uid="part8" data-qualified-name="Kafka" id="part8-tail"><path d="M1482.6143,1555.4141 L1606.7676,1555.4141 C1611.7676,1555.4141 1611.7676,1568.5625 1611.7676,1568.5625 C1611.7676,1568.5625 1611.7676,1581.7109 1606.7676,1581.7109 L1482.6143,1581.7109 C1477.6143,1581.7109 1477.6143,1568.5625 1477.6143,1568.5625 C1477.6143,1568.5625 1477.6143,1555.4141 1482.6143,1555.4141" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M1606.7676,1555.4141 C1601.7676,1555.4141 1601.7676,1568.5625 1601.7676,1568.5625 C1601.7676,1581.7109 1606.7676,1581.7109 1606.7676,1581.7109" fill="none" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="114.1533" x="1482.6143" y="1573.4092">Kafka Event Bus</text></g><g class="participant participant-head" data-entity-uid="part9" data-qualified-name="Cache" id="part9-head"><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="116.2451" x="1621.7676" y="145.7373">Redis (Hot Data)</text><path d="M1664.8901,96.7422 C1664.8901,86.7422 1682.8901,86.7422 1682.8901,86.7422 C1682.8901,86.7422 1700.8901,86.7422 1700.8901,96.7422 L1700.8901,122.7422 C1700.8901,132.7422 1682.8901,132.7422 1682.8901,132.7422 C1682.8901,132.7422 1664.8901,132.7422 1664.8901,122.7422 L1664.8901,96.7422" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M1664.8901,96.7422 C1664.8901,106.7422 1682.8901,106.7422 1682.8901,106.7422 C1682.8901,106.7422 1700.8901,106.7422 1700.8901,96.7422" fill="none" style="stroke:#000000;stroke-width:1;"/></g><g class="participant participant-tail" data-entity-uid="part9" data-qualified-name="Cache" id="part9-tail"><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="116.2451" x="1621.7676" y="1568.4092">Redis (Hot Data)</text><path d="M1664.8901,1581.7109 C1664.8901,1571.7109 1682.8901,1571.7109 1682.8901,1571.7109 C1682.8901,1571.7109 1700.8901,1571.7109 1700.8901,1581.7109 L1700.8901,1607.7109 C1700.8901,1617.7109 1682.8901,1617.7109 1682.8901,1617.7109 C1682.8901,1617.7109 1664.8901,1617.7109 1664.8901,1607.7109 L1664.8901,1581.7109" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M1664.8901,1581.7109 C1664.8901,1591.7109 1682.8901,1591.7109 1682.8901,1591.7109 C1682.8901,1591.7109 1700.8901,1591.7109 1700.8901,1581.7109" fill="none" style="stroke:#000000;stroke-width:1;"/></g><g class="participant participant-head" data-entity-uid="part10" data-qualified-name="DB" id="part10-head"><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="83.3164" x="1754.0127" y="145.7373">Sharded DB</text><path d="M1780.6709,96.7422 C1780.6709,86.7422 1798.6709,86.7422 1798.6709,86.7422 C1798.6709,86.7422 1816.6709,86.7422 1816.6709,96.7422 L1816.6709,122.7422 C1816.6709,132.7422 1798.6709,132.7422 1798.6709,132.7422 C1798.6709,132.7422 1780.6709,132.7422 1780.6709,122.7422 L1780.6709,96.7422" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M1780.6709,96.7422 C1780.6709,106.7422 1798.6709,106.7422 1798.6709,106.7422 C1798.6709,106.7422 1816.6709,106.7422 1816.6709,96.7422" fill="none" style="stroke:#000000;stroke-width:1;"/></g><g class="participant participant-tail" data-entity-uid="part10" data-qualified-name="DB" id="part10-tail"><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="83.3164" x="1754.0127" y="1568.4092">Sharded DB</text><path d="M1780.6709,1581.7109 C1780.6709,1571.7109 1798.6709,1571.7109 1798.6709,1571.7109 C1798.6709,1571.7109 1816.6709,1571.7109 1816.6709,1581.7109 L1816.6709,1607.7109 C1816.6709,1617.7109 1798.6709,1617.7109 1798.6709,1617.7109 C1798.6709,1617.7109 1780.6709,1617.7109 1780.6709,1607.7109 L1780.6709,1581.7109" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M1780.6709,1581.7109 C1780.6709,1591.7109 1798.6709,1591.7109 1798.6709,1591.7109 C1798.6709,1591.7109 1816.6709,1591.7109 1816.6709,1581.7109" fill="none" style="stroke:#000000;stroke-width:1;"/></g><g class="participant participant-head" data-entity-uid="part11" data-qualified-name="WMS" id="part11-head"><rect fill="#FFFFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="143.1924" x="2053.6157" y="117.7422"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="129.1924" x="2060.6157" y="137.7373">WMS (Warehouse)</text></g><g class="participant participant-tail" data-entity-uid="part11" data-qualified-name="WMS" id="part11-tail"><rect fill="#FFFFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="143.1924" x="2053.6157" y="1555.4141"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="129.1924" x="2060.6157" y="1575.4092">WMS (Warehouse)</text></g><g class="participant participant-head" data-entity-uid="part12" data-qualified-name="Bank" id="part12-head"><rect fill="#FFFFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="121.8301" x="2377.2773" y="117.7422"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="107.8301" x="2384.2773" y="137.7373">Bank / Acquirer</text></g><g class="participant participant-tail" data-entity-uid="part12" data-qualified-name="Bank" id="part12-tail"><rect fill="#FFFFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="121.8301" x="2377.2773" y="1555.4141"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="107.8301" x="2384.2773" y="1575.4092">Bank / Acquirer</text></g><g><title>Storefront Gateway</title><rect fill="#FFFFFF" height="145.6641" style="stroke:#000000;stroke-width:1;" width="10" x="543.4961" y="283.7031"/></g><g><title>Storefront Gateway</title><rect fill="#FFFFFF" height="349.5938" style="stroke:#000000;stroke-width:1;" width="10" x="543.4961" y="518.7656"/></g><g><title>Storefront Gateway</title><rect fill="#FFFFFF" height="225.0625" style="stroke:#000000;stroke-width:1;" width="10" x="543.4961" y="978.8906"/></g><g><title>Cart Service</title><rect fill="#FFFFFF" height="87.3984" style="stroke:#000000;stroke-width:1;" width="10" x="760.4111" y="312.8359"/></g><g><title>Order .OMS.</title><rect fill="#FFFFFF" height="291.3281" style="stroke:#000000;stroke-width:1;" width="10" x="891.002" y="547.8984"/></g><g><title>Order .OMS.</title><rect fill="#FFFFFF" height="137.6641" style="stroke:#000000;stroke-width:1;" width="10" x="891.002" y="1037.1563"/></g><g><title>Payment Service</title><rect fill="#FFFFFF" height="87.3984" style="stroke:#000000;stroke-width:1;" width="10" x="1120.8872" y="722.6953"/></g><g><title>Payment Service</title><rect fill="#FFFFFF" height="195.9297" style="stroke:#000000;stroke-width:1;" width="10" x="1120.8872" y="1008.0234"/></g><g><title>Inventory Service</title><rect fill="#FFFFFF" height="87.3984" style="stroke:#000000;stroke-width:1;" width="10" x="1285.4731" y="577.0313"/></g><g><title>WMS .Warehouse.</title><rect fill="#FFFFFF" height="150.6641" style="stroke:#000000;stroke-width:1;" width="10" x="2120.2119" y="1293.3516"/></g><path d="M15,166.0391 L283.4438,166.0391 L283.4438,173.1719 L273.4438,183.1719 L15,183.1719 L15,166.0391" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><rect fill="none" height="271.3281" style="stroke:#000000;stroke-width:1;" width="1739.0127" x="15" y="166.0391"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="223.4438" x="30" y="179.106">1. Preparation (Search &amp; Cart)</text><path d="M226,188.1719 L226,228.1719 L415,228.1719 L415,198.1719 L405,188.1719 L226,188.1719" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M405,188.1719 L405,198.1719 L415,198.1719 L405,188.1719" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="168.2065" x="232" y="205.2388">User browses catalog and</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="89.8066" x="232" y="220.3716">selects items.</text><g class="message" data-entity-1="part1" data-entity-2="part2" id="msg1"><polygon fill="#000000" points="209.3247,250.5703,219.3247,254.5703,209.3247,258.5703,213.3247,254.5703" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="63.0137" x2="215.3247" y1="254.5703" y2="254.5703"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="70.0137" y="249.5044">1</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="121.2656" x="83.0591" y="249.5044">Click "Add to Cart"</text></g><g class="message" data-entity-1="part2" data-entity-2="part3" id="msg2"><polygon fill="#000000" points="531.4961,279.7031,541.4961,283.7031,531.4961,287.7031,535.4961,283.7031" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="221.3247" x2="537.4961" y1="283.7031" y2="283.7031"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="228.3247" y="278.6372">2</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="182.6665" x="241.3701" y="278.6372">RPC: addToCart(sku_id, qty)</text></g><g class="message" data-entity-1="part3" data-entity-2="part4" id="msg3"><polygon fill="#000000" points="748.4111,308.8359,758.4111,312.8359,748.4111,316.8359,752.4111,312.8359" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="553.4961" x2="754.4111" y1="312.8359" y2="312.8359"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="560.4961" y="307.77">3</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="132.4312" x="573.5415" y="307.77">Update Session Cart</text></g><g class="message" data-entity-1="part4" data-entity-2="part9" id="msg4"><polygon fill="#000000" points="1670.8901,337.9688,1680.8901,341.9688,1670.8901,345.9688,1674.8901,341.9688" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="770.4111" x2="1676.8901" y1="341.9688" y2="341.9688"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="777.4111" y="336.9028">4</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="216.1313" x="790.4565" y="336.9028">HSET cart:{user_id} (TTL 7 days)</text></g><g class="message" data-entity-1="part9" data-entity-2="part4" id="msg5"><line style="stroke:#000000;stroke-width:1;" x1="771.4111" x2="781.4111" y1="371.1016" y2="367.1016"/><line style="stroke:#000000;stroke-width:1;" x1="771.4111" x2="781.4111" y1="371.1016" y2="375.1016"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="770.4111" x2="1681.8901" y1="371.1016" y2="371.1016"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="787.4111" y="366.0356">5</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="18.7573" x="800.4565" y="366.0356">OK</text></g><g class="message" data-entity-1="part4" data-entity-2="part3" id="msg6"><line style="stroke:#000000;stroke-width:1;" x1="554.4961" x2="564.4961" y1="400.2344" y2="396.2344"/><line style="stroke:#000000;stroke-width:1;" x1="554.4961" x2="564.4961" y1="400.2344" y2="404.2344"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="553.4961" x2="764.4111" y1="400.2344" y2="400.2344"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="570.4961" y="395.1685">6</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="169.8696" x="583.5415" y="395.1685">Cart Updated (Total Price)</text></g><g class="message" data-entity-1="part3" data-entity-2="part2" id="msg7"><line style="stroke:#000000;stroke-width:1;" x1="222.3247" x2="232.3247" y1="429.3672" y2="425.3672"/><line style="stroke:#000000;stroke-width:1;" x1="222.3247" x2="232.3247" y1="429.3672" y2="433.3672"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="221.3247" x2="547.4961" y1="429.3672" y2="429.3672"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="238.3247" y="424.3013">7</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="176.3062" x="251.3701" y="424.3013">UI Update (Badge Counter)</text></g><path d="M15,451.3672 L336.1738,451.3672 L336.1738,458.5 L326.1738,468.5 L15,468.5 L15,451.3672" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><rect fill="none" height="475.2578" style="stroke:#000000;stroke-width:1;" width="2504.1074" x="15" y="451.3672"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="276.1738" x="30" y="464.4341">2. Checkout (Reservation &amp; Payment)</text><g class="message" data-entity-1="part1" data-entity-2="part2" id="msg8"><polygon fill="#000000" points="209.3247,485.6328,219.3247,489.6328,209.3247,493.6328,213.3247,489.6328" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="63.0137" x2="215.3247" y1="489.6328" y2="489.6328"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="70.0137" y="484.5669">8</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="103.0098" x="83.0591" y="484.5669">Click "Pay Now"</text></g><g class="message" data-entity-1="part2" data-entity-2="part3" id="msg9"><polygon fill="#000000" points="531.4961,514.7656,541.4961,518.7656,531.4961,522.7656,535.4961,518.7656" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="221.3247" x2="537.4961" y1="518.7656" y2="518.7656"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="228.3247" y="513.6997">9</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="290.126" x="241.3701" y="513.6997">RPC: createOrder(cart_id, payment_method)</text></g><g class="message" data-entity-1="part3" data-entity-2="part5" id="msg10"><polygon fill="#000000" points="879.002,543.8984,889.002,547.8984,879.002,551.8984,883.002,547.8984" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="553.4961" x2="885.002" y1="547.8984" y2="547.8984"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="560.4961" y="542.8325">10</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="95.71" x="582.5869" y="542.8325">Initialize Order</text></g><g class="message" data-entity-1="part5" data-entity-2="part7" id="msg11"><polygon fill="#000000" points="1273.4731,573.0313,1283.4731,577.0313,1273.4731,581.0313,1277.4731,577.0313" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="901.002" x2="1279.4731" y1="577.0313" y2="577.0313"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="908.002" y="571.9653">11</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="150.7695" x="930.0928" y="571.9653">Reserve Stock(sku_ids)</text></g><g class="message" data-entity-1="part7" data-entity-2="part10" id="msg12"><polygon fill="#000000" points="1786.6709,602.1641,1796.6709,606.1641,1786.6709,610.1641,1790.6709,606.1641" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="1295.4731" x2="1792.6709" y1="606.1641" y2="606.1641"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="1302.4731" y="601.0981">12</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="261.1362" x="1324.564" y="601.0981">Transaction: Decrement Available Stock</text></g><g class="message" data-entity-1="part10" data-entity-2="part7" id="msg13"><line style="stroke:#000000;stroke-width:1;" x1="1296.4731" x2="1306.4731" y1="635.2969" y2="631.2969"/><line style="stroke:#000000;stroke-width:1;" x1="1296.4731" x2="1306.4731" y1="635.2969" y2="639.2969"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="1295.4731" x2="1797.6709" y1="635.2969" y2="635.2969"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="1312.4731" y="630.231">13</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="127.0864" x="1334.564" y="630.231">Reservation ID / OK</text></g><g class="message" data-entity-1="part7" data-entity-2="part5" id="msg14"><line style="stroke:#000000;stroke-width:1;" x1="902.002" x2="912.002" y1="664.4297" y2="660.4297"/><line style="stroke:#000000;stroke-width:1;" x1="902.002" x2="912.002" y1="664.4297" y2="668.4297"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="901.002" x2="1289.4731" y1="664.4297" y2="664.4297"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="918.002" y="659.3638">14</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="178.4072" x="940.0928" y="659.3638">Stock Reserved (Hold 15m)</text></g><g class="message" data-entity-1="part5" data-entity-2="part10" id="msg15"><polygon fill="#000000" points="1786.6709,689.5625,1796.6709,693.5625,1786.6709,697.5625,1790.6709,693.5625" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="901.002" x2="1792.6709" y1="693.5625" y2="693.5625"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="908.002" y="688.4966">15</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="265.1162" x="930.0928" y="688.4966">Save Order (Status: PENDING_PAYMENT)</text></g><g class="message" data-entity-1="part5" data-entity-2="part6" id="msg16"><polygon fill="#000000" points="1108.8872,718.6953,1118.8872,722.6953,1108.8872,726.6953,1112.8872,722.6953" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="901.002" x2="1114.8872" y1="722.6953" y2="722.6953"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="908.002" y="717.6294">16</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="125.8677" x="930.0928" y="717.6294">Initiate Transaction</text></g><g class="message" data-entity-1="part6" data-entity-2="part12" id="msg17"><polygon fill="#000000" points="2426.1924,747.8281,2436.1924,751.8281,2426.1924,755.8281,2430.1924,751.8281" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="1130.8872" x2="2432.1924" y1="751.8281" y2="751.8281"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="1137.8872" y="746.7622">17</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="216.1504" x="1159.978" y="746.7622">API: Charge Token / Get 3DS URL</text></g><g class="message" data-entity-1="part12" data-entity-2="part6" id="msg18"><line style="stroke:#000000;stroke-width:1;" x1="1131.8872" x2="1141.8872" y1="780.9609" y2="776.9609"/><line style="stroke:#000000;stroke-width:1;" x1="1131.8872" x2="1141.8872" y1="780.9609" y2="784.9609"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="1130.8872" x2="2437.1924" y1="780.9609" y2="780.9609"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="1147.8872" y="775.895">18</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="139.5024" x="1169.978" y="775.895">3DS Redirect Needed</text></g><g class="message" data-entity-1="part6" data-entity-2="part5" id="msg19"><line style="stroke:#000000;stroke-width:1;" x1="902.002" x2="912.002" y1="810.0938" y2="806.0938"/><line style="stroke:#000000;stroke-width:1;" x1="902.002" x2="912.002" y1="810.0938" y2="814.0938"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="901.002" x2="1124.8872" y1="810.0938" y2="810.0938"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="918.002" y="805.0278">19</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="87.4199" x="940.0928" y="805.0278">Payment URL</text></g><g class="message" data-entity-1="part5" data-entity-2="part3" id="msg20"><line style="stroke:#000000;stroke-width:1;" x1="554.4961" x2="564.4961" y1="839.2266" y2="835.2266"/><line style="stroke:#000000;stroke-width:1;" x1="554.4961" x2="564.4961" y1="839.2266" y2="843.2266"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="553.4961" x2="895.002" y1="839.2266" y2="839.2266"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="570.4961" y="834.1606">20</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="227.6714" x="592.5869" y="834.1606">Order Created (Payment Required)</text></g><g class="message" data-entity-1="part3" data-entity-2="part2" id="msg21"><line style="stroke:#000000;stroke-width:1;" x1="222.3247" x2="232.3247" y1="868.3594" y2="864.3594"/><line style="stroke:#000000;stroke-width:1;" x1="222.3247" x2="232.3247" y1="868.3594" y2="872.3594"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="221.3247" x2="547.4961" y1="868.3594" y2="868.3594"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="238.3247" y="863.2935">21</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="176.687" x="260.4155" y="863.2935">Open WebView (Bank 3DS)</text></g><path d="M226,881.3594 L226,921.3594 L414,921.3594 L414,891.3594 L404,881.3594 L226,881.3594" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M404,881.3594 L404,891.3594 L414,891.3594 L404,881.3594" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="167.6416" x="232" y="898.4263">User confirms transaction</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="134.3164" x="232" y="913.5591">in banking interface.</text><path d="M452.8872,940.625 L753.0439,940.625 L753.0439,947.7578 L743.0439,957.7578 L452.8872,957.7578 L452.8872,940.625" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><rect fill="none" height="271.3281" style="stroke:#000000;stroke-width:1;" width="2066.2202" x="452.8872" y="940.625"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="255.1567" x="467.8872" y="953.6919">3. Payment Callback &amp; Finalization</text><g class="message" data-entity-1="part12" data-entity-2="part3" id="msg22"><polygon fill="#000000" points="564.4961,974.8906,554.4961,978.8906,564.4961,982.8906,560.4961,978.8906" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="558.4961" x2="2437.1924" y1="978.8906" y2="978.8906"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="570.4961" y="973.8247">22</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="227.0049" x="592.5869" y="973.8247">Webhook: Payment Success (TxID)</text></g><g class="message" data-entity-1="part3" data-entity-2="part6" id="msg23"><polygon fill="#000000" points="1108.8872,1004.0234,1118.8872,1008.0234,1108.8872,1012.0234,1112.8872,1008.0234" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="553.4961" x2="1114.8872" y1="1008.0234" y2="1008.0234"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="560.4961" y="1002.9575">23</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="109.1226" x="582.5869" y="1002.9575">Process Callback</text></g><g class="message" data-entity-1="part6" data-entity-2="part5" id="msg24"><polygon fill="#000000" points="912.002,1033.1563,902.002,1037.1563,912.002,1041.1563,908.002,1037.1563" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="906.002" x2="1119.8872" y1="1037.1563" y2="1037.1563"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="918.002" y="1032.0903">24</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="178.7944" x="940.0928" y="1032.0903">Update Order Status (PAID)</text></g><g class="message" data-entity-1="part5" data-entity-2="part10" id="msg25"><polygon fill="#000000" points="1786.6709,1062.2891,1796.6709,1066.2891,1786.6709,1070.2891,1790.6709,1066.2891" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="901.002" x2="1792.6709" y1="1066.2891" y2="1066.2891"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="908.002" y="1061.2231">25</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="223.2026" x="930.0928" y="1061.2231">UPDATE Orders SET Status='PAID'</text></g><path d="M627,1079.2891 L627,1119.2891 L885,1119.2891 L885,1089.2891 L875,1079.2891 L627,1079.2891" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M875,1079.2891 L875,1089.2891 L885,1089.2891 L875,1079.2891" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="237.8721" x="633" y="1096.356">Critical: Decouple User/Bank latency</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="146.8784" x="633" y="1111.4888">from Warehouse logic.</text><g class="message" data-entity-1="part5" data-entity-2="part8" id="msg26"><polygon fill="#000000" points="1532.6909,1141.6875,1542.6909,1145.6875,1532.6909,1149.6875,1536.6909,1145.6875" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="901.002" x2="1538.6909" y1="1145.6875" y2="1145.6875"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="908.002" y="1140.6216">26</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="167.0576" x="930.0928" y="1140.6216">Publish Event (OrderPaid)</text></g><g class="message" data-entity-1="part5" data-entity-2="part6" id="msg27"><line style="stroke:#000000;stroke-width:1;" x1="1118.8872" x2="1108.8872" y1="1174.8203" y2="1170.8203"/><line style="stroke:#000000;stroke-width:1;" x1="1118.8872" x2="1108.8872" y1="1174.8203" y2="1178.8203"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="896.002" x2="1119.8872" y1="1174.8203" y2="1174.8203"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="903.002" y="1169.7544">27</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="26.4951" x="925.0928" y="1169.7544">ACK</text></g><g class="message" data-entity-1="part6" data-entity-2="part3" id="msg28"><line style="stroke:#000000;stroke-width:1;" x1="549.4961" x2="559.4961" y1="1203.9531" y2="1199.9531"/><line style="stroke:#000000;stroke-width:1;" x1="549.4961" x2="559.4961" y1="1203.9531" y2="1207.9531"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="548.4961" x2="1124.8872" y1="1203.9531" y2="1203.9531"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="565.4961" y="1198.8872">28</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="85.3315" x="587.5869" y="1198.8872">HTTP 200 OK</text></g><path d="M141.5137,1225.9531 L430.9746,1225.9531 L430.9746,1233.0859 L420.9746,1243.0859 L141.5137,1243.0859 L141.5137,1225.9531" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><rect fill="none" height="313.4609" style="stroke:#000000;stroke-width:1;" width="2296.6787" x="141.5137" y="1225.9531"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="244.4609" x="156.5137" y="1239.02">4. Warehouse Fulfillment (Async)</text><g class="message" data-entity-1="part8" data-entity-2="part7" id="msg29"><line style="stroke:#000000;stroke-width:1;" x1="1291.4731" x2="1301.4731" y1="1264.2188" y2="1260.2188"/><line style="stroke:#000000;stroke-width:1;" x1="1291.4731" x2="1301.4731" y1="1264.2188" y2="1268.2188"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="1290.4731" x2="1543.6909" y1="1264.2188" y2="1264.2188"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="1307.4731" y="1259.1528">29</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="208.127" x="1329.564" y="1259.1528">Consume (Commit Reservation)</text></g><g class="message" data-entity-1="part8" data-entity-2="part11" id="msg30"><line style="stroke:#000000;stroke-width:1;" x1="2118.2119" x2="2108.2119" y1="1293.3516" y2="1289.3516"/><line style="stroke:#000000;stroke-width:1;" x1="2118.2119" x2="2108.2119" y1="1293.3516" y2="1297.3516"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="1544.6909" x2="2119.2119" y1="1293.3516" y2="1293.3516"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="1551.6909" y="1288.2856">30</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="140.061" x="1573.7817" y="1288.2856">Consume (OrderPaid)</text></g><g class="message" data-entity-1="part11" data-entity-2="part10" id="msg31"><polygon fill="#000000" points="1809.6709,1318.4844,1799.6709,1322.4844,1809.6709,1326.4844,1805.6709,1322.4844" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="1803.6709" x2="2119.2119" y1="1322.4844" y2="1322.4844"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="1815.6709" y="1317.4185">31</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="275.4502" x="1837.7617" y="1317.4185">Look up Warehouse Location (Route logic)</text></g><g class="message" data-entity-1="part11" data-entity-2="part11" id="msg32"><line style="stroke:#000000;stroke-width:1;" x1="2130.2119" x2="2172.2119" y1="1351.6172" y2="1351.6172"/><line style="stroke:#000000;stroke-width:1;" x1="2172.2119" x2="2172.2119" y1="1351.6172" y2="1364.6172"/><line style="stroke:#000000;stroke-width:1;" x1="2131.2119" x2="2172.2119" y1="1364.6172" y2="1364.6172"/><polygon fill="#000000" points="2141.2119,1360.6172,2131.2119,1364.6172,2141.2119,1368.6172,2137.2119,1364.6172" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="2137.2119" y="1346.5513">32</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="256.8896" x="2159.3027" y="1346.5513">Generate Pick List (Closest Warehouse)</text></g><path d="M2135,1377.6172 L2135,1417.6172 L2320,1417.6172 L2320,1387.6172 L2310,1377.6172 L2135,1377.6172" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M2310,1377.6172 L2310,1387.6172 L2320,1387.6172 L2310,1377.6172" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="111.2236" x="2141" y="1394.6841">Physical Process:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="164.6328" x="2141" y="1409.8169">Robot/Human picks item.</text><g class="message" data-entity-1="part11" data-entity-2="part8" id="msg33"><polygon fill="#000000" points="1555.6909,1440.0156,1545.6909,1444.0156,1555.6909,1448.0156,1551.6909,1444.0156" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="1549.6909" x2="2124.2119" y1="1444.0156" y2="1444.0156"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="1561.6909" y="1438.9497">33</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="297.5591" x="1583.7817" y="1438.9497">Publish Event (Status: ASSEMBLY_COMPLETE)</text></g><g class="message" data-entity-1="part8" data-entity-2="part5" id="msg34"><line style="stroke:#000000;stroke-width:1;" x1="897.002" x2="907.002" y1="1473.1484" y2="1469.1484"/><line style="stroke:#000000;stroke-width:1;" x1="897.002" x2="907.002" y1="1473.1484" y2="1477.1484"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="896.002" x2="1543.6909" y1="1473.1484" y2="1473.1484"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="913.002" y="1468.0825">34</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="211.8784" x="935.0928" y="1468.0825">Update Status (READY_TO_SHIP)</text></g><g class="message" data-entity-1="part5" data-entity-2="part3" id="msg35"><polygon fill="#000000" points="559.4961,1498.2813,549.4961,1502.2813,559.4961,1506.2813,555.4961,1502.2813" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="553.4961" x2="895.002" y1="1502.2813" y2="1502.2813"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="565.4961" y="1497.2153">35</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="148.8081" x="587.5869" y="1497.2153">Push Notification (SSE)</text></g><g class="message" data-entity-1="part3" data-entity-2="part2" id="msg36"><line style="stroke:#000000;stroke-width:1;" x1="222.3247" x2="232.3247" y1="1531.4141" y2="1527.4141"/><line style="stroke:#000000;stroke-width:1;" x1="222.3247" x2="232.3247" y1="1531.4141" y2="1535.4141"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="221.3247" x2="547.4961" y1="1531.4141" y2="1531.4141"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="238.3247" y="1526.3481">36</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="218.0483" x="260.4155" y="1526.3481">Notification ("Goods on the way")</text></g><?plantuml-src bLT_R-964FsVJp6bKiv83PUxN5iLgIVnCq47mS9SqKcHeiLUmWgpI-mrELhrk_VjhWqsXAgzI2TZPj_El7dpTlb1h_Y6qpPcGjPOffNCDWkUr6fQw9ZJNCGHFYQ2fpH98fxG85Qlv7LNF5ohJ9DMDCZYfOZZ3PUwKQkze-lhQ_9PeaKejapgb7fyAQJGGadpNQssKD-fteq55b0W8bwd7-SheNcDY8LQ9LJ_ccAdTYn2VCTIzuHljqTKgiyxD5OBWIJRswqBssvhN4O4_7oJEwRvAzlJYErvKcmJRDJw32t0ldoPA3pdYona_dm2sqKiTR9KI9wc5F1aX_nIuFT_6TmE1gVONNmeeYogUH7imjCuHx0t6GSD6uQ7qn2VxJUMjX8Qthq1DfGx1AfaNud5MnDRBQV7DACh6eieYb5jOXeomB_-3K1VCfvngdzXopMZli4qbLim-muX4TOlM8geAOz4IjwzqcH06tcruOfNme8LGwaHzJeseDSvIMYadaMAKb9arV-kUI9PZ9p6UBcVglHS2kE0l3aINwaivMxN-Jbv7IRNz9xQuKic4gC7X9btnzsTUAt4FxH074l25N9eHv4HkksZLV1peh8jIFhD_D679la9nrRCQjmxh3CB6iY2I2hDAH7FAqrgQOJQ8glnHQ9UKynM26vYzKnCHeyovJ4FCJVGwYPjrYo07G6w_kpMOdZ2DTLBUTLTr7PhOdBLjcZgTrl4ecYcJ8oNhhCd4Vr4BthlqiAuYHs23petB-r_nUG0BLShCjv69ZQ0w4sTvdqLvQZh72L_uL2WWXRT1_qPgarqwo-qAa4wVvCtcuteL-XZdpRoPOW5qvzBcq--l05h8Wx5slQu72DWAZ2Ale0s1nhnotaUgZM0hZl3ebolmw9dh56PX1BFi4eEKT7FHoHKcEGLJJcAtR6Z1nOAki6StT37vZ7OAyTUKJxnZSigG0GzgDT_KK2OS7oszk8Pxgq8jWxuQSFrIaKNz72g1LXI2oO2CsUn-9ExCw6wrBbMJgmXXEunxISCs2yHQJ2T9xNo2EXBgt2TQpKzoIltB_FEFHg0NgT5iuJ9r8GfsSA1WugjJxPtJCHi4UUeTc6lu_fStTTbDkp187Af5HkOM5ktXIZIZ8pDnH5z-7bpfebIbkL2JPu1s-MimISqqrdQ8h__q1i-t3tvxM_Z_iEiSK9VuVcEzZS8T0T0qHViNoAZIj_XgA3yqImt5jYYjZyqYcK9j3x30Ib1n1tNTDiBwEjqPDTO0xLy55kQRutf9p0iUk0Shbv1Ft1N5550bTWg9NMigZBPZg-kLJ5uBx2ct1fvTCP_8S7piPviKTYSB_uG_DLCDkf12HU7-f3J9VyEbLoAP9EIFbB-A8Ma1Q25V2PXJ6F9GjuySuXRa9xkPNZWfkl0td09U0HSuhPv36Lnl61GunKDX3Ipo0xTTbqgqOTwLqgjZqq8iZ0qDnTlzdtO-nydGT5rFr5sVP75HP6TACqg8RTLrrCt0cXf-ooHYe-K9kYhtslF-cuzBbyuJXp8x-yCoBkJuHamIPDC5nDZ-nZpfMsZJQURO6X25blN0Dkm2jFPzvR568d8SFyeSJFSqE66GJYgHTWiPsRlGc0cMyGYNUKN9SycwJCHDTwGTy5ck_lbae3FPkdGq_lPpAUFDpU5MRqzJ__XdFhKekDrgtILFnKWReFqgLdYe1phMI6x8jrDiUAm47QQuLU6rrMRZT1bnoqHKreujvqfLfsmU2XfNcPfVbJ8268df7tCTQJ2_6usnH6RzwzHNcTtlEEI9vP2Sx2EG0fIZd7XnCFnUdd95Io4lzgdHax5ZBGUvLGjb7v_dsqWnIs0tSMkUPRwsn8g3ebs4FJ7dT6tf-vax8_wi_wPQLNeA95PdhfYtgRzTk_Rqspo5DmF_SRPd1ravcV8v45fiHG5WyYZSS5Tgu7rEwMYbF28tvXaVb4rZFh-0G00?></g></svg>